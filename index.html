<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Health App Login</title>
<meta name="description" content="Login to manage your health history with the Health App.">
<meta name="name" content="Health App">
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&amp;display=swap" rel="stylesheet"/>
<style type="text/tailwindcss">
      :root {
        --brand-primary: #0c77f2;
        --brand-secondary: #e7edf4;
        --text-primary: #0c77f2;
        --text-secondary: #49709c;
        --background-primary: #ffffff;
        --background-secondary: #f8fafc;
      }
      body {
        font-family: 'Inter', sans-serif;
      }
</style>
</head>
<body class="bg-[var(--background-secondary)]">
<main>
<div class="flex h-screen w-full items-center justify-center">
<div class="w-full max-w-md rounded-2xl bg-[var(--background-primary)] p-8 shadow-2xl">
<div class="mb-8 text-center">
<div class="mb-4 inline-flex items-center justify-center">

<span class="material-icons-outlined text-6xl text-blue-600 ">health_and_safety</span>
</div>
<h1 class="text-3xl font-bold tracking-tight text-[var(--text-primary)]">Welcome Back</h1>
<p class="mt-2 text-[var(--text-secondary)]">Log in to manage your health history.</p>
</div>
<form class="space-y-6" method="POST" onsubmit="redirectUser(event)">
  <div>
<label class="sr-only" for="email">Email</label>
<input class="form-input w-full rounded-md border-gray-300 bg-[var(--brand-secondary)] p-4 text-lg text-[var(--text-primary)] placeholder-[var(--text-secondary)] transition focus:border-[var(--brand-primary)] focus:ring-[var(--brand-primary)]" id="email" name="email" placeholder="Email" required="" type="email"/>
</div>
<div>
<label class="sr-only" for="password">Password</label>
<input class="form-input w-full rounded-md border-gray-300 bg-[var(--brand-secondary)] p-4 text-lg text-[var(--text-primary)] placeholder-[var(--text-secondary)] transition focus:border-[var(--brand-primary)] focus:ring-[var(--brand-primary)]" id="password" name="password" placeholder="Password" required="" type="password"/>
</div>
<div class="text-right">
<a class="text-sm font-medium text-[var(--brand-primary)] hover:underline" href="forgot_password.html">Forgot Password?</a>
</div>
<div>
<button onclick="redirectUser(event)" class="w-full rounded-md bg-[var(--brand-primary)] px-4 py-4 text-lg font-bold text-white transition hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-[var(--brand-primary)] focus:ring-offset-2" type="submit">Login</button>
</div>
</form>
<script>
  async function redirectUser(event) {
    event.preventDefault();

    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    try {
      const response = await fetch("https://health-app-s67i.onrender.com/api/auth/login", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ email, password }),
      });

      const data = await response.json();

      if (response.ok) {
        localStorage.setItem("token", data.token); // optional
        window.location.href = "HomePage.html";
      } else {
        alert(data.message || "Login failed.");
      }
    } catch (err) {
      alert("Error: " + err.message);
    }
  }
</script>

<div class="mt-8 text-center">
<p class="text-[var(--text-secondary)]">
            Don't have an account?
            <a class="font-medium text-[var(--brand-primary)] hover:underline" href="signupPage.html">Sign Up</a>
</p>
</div>
</div>
</main>
</body></html>
</body></html>